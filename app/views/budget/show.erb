<div id="current_budget_content">
  <div class="row">
    <div class="col-md-6">
      <table class="table table-striped table-bordered table-hover table-condensed">
        <h4>Sumary: </h4>
        <tr>
          <td>Budget time period</td>
          <td><%= @budget_wrapper.time_period %></td>
        </tr>
        <tr>
          <td>Spending limit</td>
          <td>£ <%= @budget_wrapper.spending_limit %></td>
        </tr>
        <tr>
          <td>Total expenses</td>
          <td>£ <%= @budget_wrapper.total_spending%></td>
        </tr>
        <tr>
          <td>Overspent?</td>
          <td><%= @budget_wrapper.overspent? %></td>
        </tr>
      </table>
    </div>
    <div class="col-md-6">
      <h4>Total spending per category: </h4>
      <table class="table table-striped table-bordered table-hover table-condensed">
        <% if @budget_wrapper.categories_with_totals.nil? %>
          <tr><td>No expenses to show</td></tr>
        <%else%>
          <% @budget_wrapper.categories_with_totals.each do |category_name, total| %>
            <tr>
              <td><%=category_name%></td>
              <td>£ <%=total%></td>
            </tr>
          <%end%>
        <%end%>
      </table>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <h4>Latest expenses:</h4>
      <table class="table table-bordered table-striped table-hover table-condensed">
        <tr>
          <th>Date</th>
          <th>Description</th>
          <th>Price</th>
        </tr>
        <% if !@budget_wrapper.costs.nil? %>
          <% @budget_wrapper.costs.each do |cost| %>
            <tr>
              <td><%=cost.formatted_date%></td>
              <td><%=cost.description%></td>
              <td>£ <%=cost.price%></td>
            </tr>
          <%end%>
        <%end%>
      </table>
      <a href="#">View all</a>
    </div>
  </div>
  <% if @budget_wrapper.budget.current? %>
    <form id='cost_form' role='form' method='post' action='/cost'>
      <div class='row well'>
        <div class='col-md-4'>
          <div class="row">
            <div class='form-group col-md-3'>
              <label for='name'>Date</label>
            </div>
            <div class='form-group col-md-9'>
              <input type='text' class='form-control' name='cost_date'>
            </div>
          </div>
          <div class="row">
            <div class='form-group col-md-3'>
              <label for='name'>Price</label>
            </div>
            <div class='form-group col-md-9'>
              <input type='text' class='form-control' name='cost_price'>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="row">
            <div class='form-group col-md-3'>
              <label for='name'>Description</label>
            </div>
            <div class='form-group col-md-9'>
              <input type='text' class='form-control' name='cost_desc'>
            </div>
          </div>
          <div class="row">
            <div class='form-group col-md-3'>
              <label for='name'>Category</label>
            </div>
            <div class='form-group col-md-9'>
              <select class="form-control" id="categories_list" name='cost[category_id]'>
                <option value='unselected'> Select ...</option>
                <% Category.all_names.each do |cat_name| %>
                  <option value='<%=cat_name%>'><%=cat_name%></option>
                <%end%>
              </select>
            </div>
          </div>
        </div>
        <div class="col-md-2">
          <div class='form-group' id='new_cost_submit_btn'>
            <input class="btn btn-success" type="submit" value="Add new cost">
          </div>
        </div>
      </div>
    </form>
  <%end%>
</div>
